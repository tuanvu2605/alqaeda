(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63db88a2"],{"307a":function(t,e,a){"use strict";var l=a("ccc2"),i=a.n(l);i.a},"4ef0":function(t,e,a){"use strict";var l=a("eac4"),i=a.n(l);i.a},ccc2:function(t,e,a){},e2fd:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("el-row",{staticClass:"form-action",attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.filter}},[a("el-form-item",{attrs:{label:"Product Name"}},[a("el-input",{attrs:{placeholder:"Enter product name"},model:{value:t.filter.title,callback:function(e){t.$set(t.filter,"title",e)},expression:"filter.title"}})],1),a("el-form-item",{attrs:{label:"Status"}},[a("el-select",{attrs:{placeholder:"Status by"},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusOpts,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"Locations"}},[a("el-drag-select",{staticStyle:{width:"350px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.filter.location,callback:function(e){t.$set(t.filter,"location",e)},expression:"filter.location"}},t._l([{name:"Viet Nam",code:"VN"}],(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1),a("el-form-item",[a("el-button",{staticStyle:{color:"white"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.filterItems}},[t._v("Search")])],1)],1)],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"button-container"},[a("el-button",{staticStyle:{color:"white"},attrs:{type:"primary",icon:"el-icon-plus",round:""},on:{click:t.handleCreate}},[t._v(" Advertisement ")])],1)])],1),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.ads,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"",prop:"id",sortable:"custom",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){e.row;var l=e.$index;return[a("span",[t._v(t._s(l+1))])]}}])}),a("el-table-column",{attrs:{label:"Thumb",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:e.thumb,"preview-src-list":e.images}})]}}])}),a("el-table-column",{attrs:{label:"Product","min-width":"350"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("a",{attrs:{target:"_blank",href:l.url}},[t._v(t._s(l.title))])]}}])}),a("el-table-column",{attrs:{label:"Location",prop:"id",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return t._l(l.location,(function(e){return a("el-tag",{key:e,attrs:{"disable-transitions":!1}},[a("b",[t._v(t._s(e))])])}))}}])}),a("el-table-column",{attrs:{label:"Status","class-name":"status-col",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{type:"published"==l.status?"success":"danger"}},[t._v(" "+t._s(l.status.toUpperCase())+" ")])]}}])}),a("el-table-column",{attrs:{label:"Actions",align:"center",width:"350","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-button",{staticStyle:{color:"white"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.edit(l)}}},[t._v(" Edit ")]),"published"!=l.status?a("el-button",{staticStyle:{color:"white"},attrs:{size:"mini",type:"success"},on:{click:function(e){return t.changeStatus(l,"published")}}},[t._v(" Publish ")]):t._e(),"deleted"!=l.status?a("el-button",{staticStyle:{color:"white"},attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.changeStatus(l,"deleted")}}},[t._v(" Delete ")]):t._e()]}}])})],1),a("el-pagination",{staticClass:"table-paging",attrs:{background:"","current-page":t.options.page,"page-sizes":[10,20,50,100],"page-size":t.options.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.options,"page",e)},"update:current-page":function(e){return t.$set(t.options,"page",e)}}})],1),a("el-modal-create",{attrs:{temp:t.tempAd,isVisible:t.dialogFormVisible},on:{"enlarge-text":t.showMess,"modal-confirm":t.confirm}})],1)},i=[],s=(a("4de4"),a("bc3a")),o=a.n(s),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",t._b({attrs:{visible:t.IsShowModal},on:{"update:visible":function(e){t.IsShowModal=e}}},"el-dialog",t.$attrs,!1),[a("el-form",{ref:"modalForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"Title",prop:"title"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"Please input"},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),a("el-form-item",{attrs:{label:"_Type",prop:"adType"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"Please select"},model:{value:t.temp.adType,callback:function(e){t.$set(t.temp,"adType",e)},expression:"temp.adType"}},t._l(t.adTypes,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"Url",prop:"url"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"Please input"},model:{value:t.temp.url,callback:function(e){t.$set(t.temp,"url",e)},expression:"temp.url"}})],1),a("el-form-item",{attrs:{label:"Thumb",prop:"thumb"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"Please input",type:"url"},model:{value:t.temp.thumb,callback:function(e){t.$set(t.temp,"thumb",e)},expression:"temp.thumb"}})],1),a("el-form-item",{attrs:{label:"Images"}},[t._l(t.temp.images,(function(e,l){return a("el-form-item",{key:l,attrs:{prop:"img"+l}},[a("el-input",{staticStyle:{width:"500px","margin-bottom":"24px"},attrs:{placeholder:"Image #"+(l+1),type:"url"},model:{value:t.temp.images[l],callback:function(e){t.$set(t.temp.images,l,e)},expression:"temp.images[index]"}},[a("el-button",{attrs:{slot:"append",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.removeImageUrl(t.temp.images,l)}},slot:"append"})],1)],1)})),a("el-button",{staticStyle:{color:"white"},attrs:{type:"primary"},on:{click:function(e){return t.addNewImg(t.temp.images)}}},[t._v("New")])],2),a("el-form-item",{attrs:{label:"Time Reload",prop:"time_reload"}},[a("el-input",{staticStyle:{width:"80px"},attrs:{placeholder:"",type:"number",min:"10"},model:{value:t.temp.timeReload,callback:function(e){t.$set(t.temp,"timeReload",e)},expression:"temp.timeReload"}})],1),a("el-form-item",{attrs:{label:"Status",prop:"status"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"Please select"},model:{value:t.temp.status,callback:function(e){t.$set(t.temp,"status",e)},expression:"temp.status"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"Locations",prop:"location"}},[a("el-drag-select",{staticStyle:{width:"500px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.temp.location,callback:function(e){t.$set(t.temp,"location",e)},expression:"temp.location"}},t._l(t.countries,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v(" Cancel ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirm("modalForm")}}},[t._v(" Confirm ")])],1)],1)},r=[],c=(a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",t._g(t._b({ref:"dragSelect",staticClass:"drag-select",attrs:{multiple:""},model:{value:t.selectVal,callback:function(e){t.selectVal=e},expression:"selectVal"}},"el-select",t.$attrs,!1),t.$listeners),[t._t("default")],2)}),u=[],d=a("2909"),p=a("aa47"),m={name:"DragSelect",props:{value:{type:Array,required:!0}},computed:{selectVal:{get:function(){return Object(d["a"])(this.value)},set:function(t){this.$emit("input",Object(d["a"])(t))}}},mounted:function(){this.setSort()},methods:{setSort:function(){var t=this,e=this.$refs["dragSelect"].$el.querySelectorAll(".el-select__tags > span")[0];this.sortable=p["a"].create(e,{ghostClass:"sortable-ghost",setData:function(t){t.setData("Text","")},onEnd:function(e){var a=t.value.splice(e.oldIndex,1)[0];t.value.splice(e.newIndex,0,a)}})}}},f=m,h=(a("4ef0"),a("2877")),g=Object(h["a"])(f,c,u,!1,null,"3228b52b",null),b=g.exports,y={adType:1,timeReload:10,title:"",url:"",thumb:"",images:[],location:[],status:"published"},v="http://localhost:3000";function S(t){return v+t}var w=["published","deleted"];function _(t){return!t||0===t.length}var k={components:{ElDragSelect:b},name:"ModalCreate",data:function(){return{finds:[],adTypes:[{title:"Interstitial",id:1},{title:"Banner",id:2},{title:"Native",id:3}],statusOptions:w,dialogStatus:"",rules:{adType:[{required:!0,message:"Please select adType",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}],url:[{type:"url",required:!0,message:"Please input url",trigger:"blur"}],thumb:[{type:"url",required:!0,message:"Please input url",trigger:"blur"}],location:[{required:!0}],status:[{required:!0}],timeReload:[{required:!0,message:"Time reload required",trigger:"blur"}]},value:[],countries:[]}},props:{temp:{},isVisible:{type:Boolean,require:!0}},computed:{IsShowModal:{get:function(){return this.isVisible},set:function(){this.$emit("enlarge-text")}}},methods:{addNewImg:function(t){t.push("")},removeImageUrl:function(t,e){t.splice(e,1)},confirm:function(t){this.$emit("modal-confirm"),this.$refs[t].validate((function(t){if(!t)return alert("error submit!"),console.log("error submit!!"),!1;console.log("submit!")}))},cancel:function(){this.$emit("enlarge-text")}},created:function(){var t=this;o.a.get(S("/country/all")).then((function(e){return t.countries=e.data,console.log(e.data)})).catch((function(t){return console.log(t)}))}},x=k,$=Object(h["a"])(x,n,r,!1,null,null,null),C=$.exports,O={components:{ElModalCreate:C,ElDragSelect:b},data:function(){return{statusOpts:w,dialogStatus:"",radio:3,listLoading:!1,tableKey:0,ads:[],isShowImgModal:!1,modal:void 0,inputVisible:!1,dialogFormVisible:!1,tempAd:Object,total:0,filter:{title:"",status:"",location:[]},options:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}}},methods:{filterItems:function(){var t=this;this.listLoading=!0;var e=JSON.parse(JSON.stringify(this.filter));_(e.title)||(e.title={$regex:e.title,$options:"i"}),e.location.length>0&&(e.location={$all:e.location}),o.a.post(S("/ad/listing"),{options:this.options,filter:e}).then((function(e){t.listLoading=!1,t.ads=e.data.docs,t.total=e.data.totalDocs})).catch((function(e){t.listLoading=!1,console.log(e)}))},handleCreate:function(){this.tempAd=y,this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){}))},edit:function(t){this.dialogStatus="edit",this.tempAd=JSON.parse(JSON.stringify(t)),this.dialogFormVisible=!0},updateAd:function(t){var e=this;o.a.post(S("/ad/update"),{ad:t}).then((function(t){e.$message({message:t.data.message,type:t.data.type}),e.fetchData()}))},createAd:function(t){var e=this;o.a.post(S("/ad/add"),{ad:t}).then((function(t){e.$message({message:t.data.message,type:t.data.type}),e.fetchData()}))},handleSizeChange:function(t){this.options.limit=t,this.fetchData()},handleCurrentChange:function(t){this.options.page=t,this.fetchData()},fetchDataWithOption:function(){var t=this;this.listLoading=!0,o.a.post(S("/ad/listing"),{options:this.options}).then((function(e){t.listLoading=!1,t.ads=e.data.docs,t.total=e.data.totalDocs})).catch((function(e){t.listLoading=!1,console.log(e)}))},fetchData:function(){this.fetchDataWithOption()},confirm:function(){console.log(this.tempAd);var t=JSON.parse(JSON.stringify(this.tempAd));switch(this.dialogStatus){case"create":this.createAd(t);break;case"edit":this.updateAd(t);break;default:console.log("confirm not handle")}},changeStatus:function(t,e){console.log(e)},showMess:function(){this.tempAd={},this.dialogFormVisible=!1,this.$message({message:this.temp.title,type:"success"})}},created:function(){var t=this;o.a.post(S("/ad/listing"),{options:this.options}).then((function(e){console.log("fuck",e.data),t.ads=e.data.docs,t.total=e.data.totalDocs})).catch((function(t){return console.log(t)}))}},T=O,A=(a("307a"),a("6544")),D=a.n(A),V=a("7496"),I=Object(h["a"])(T,l,i,!1,null,null,null);e["default"]=I.exports;D()(I,{VApp:V["a"]})},eac4:function(t,e,a){}}]);
//# sourceMappingURL=chunk-63db88a2.2dfdf963.js.map